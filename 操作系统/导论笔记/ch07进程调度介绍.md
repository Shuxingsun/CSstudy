# 进程调度：介绍

```markdown
关键问题-- 如何开发调度策略
我们该如何开发一个考虑调度策略的基本框架？什么是关键假设？哪些指标非常重要？哪些基本
方法已经在早期的系统中使用？
```

## 工作负载假设

探讨可能的策略范围之前，我们先做一些简化假设。

## 调度指标

- **性能指标**
- **公平指标**

性能指标： 

**周转时间：**:T(完成时间)-T(到达时间)

## 先进先出（FIFO）

先进先出的平均周转时间表较高，这个问题被称为**护航效应**（convoy effect）[B+79]，<u>一些耗时较少的潜在资源消费者被排在重量级的资源消费者之后</u>。这个调度方案可能让你想起在杂货店只有一个排队队伍的时候，如果看到前面的人装满 3 辆购物车食品并且掏出了支票本，你感觉如何？这会等很长时间。

## 最短任务优先(SJF)

先运行最短的任务，然后是次短的任务

**属于非抢占式调度程序**

**抢占式调度程序：**<u>非常愿意</u><u>停止一个进程以运行另一个进程</u>。这意味着调度程序采用了我们之前学习的机制。特别是调度程序可以进行上下文切换，临时停止一个运行进程，并恢复（或启动）另一个进程。

![](https://picture-house.oss-cn-beijing.aliyuncs.com/notes/3.png)

即使 B 和 C 在 A 之后不久到达，它们仍然被迫等到 A 完成，从而遭遇同样的**护航问题**

**缺点**：周转时间不怎么变化

## 最短完成时间（`STCF`）

**抢占式最短作业调度程序**

![](https://picture-house.oss-cn-beijing.aliyuncs.com/notes/4.png)

优点:

- 平均周转时间大大提高

## 新度量指标：响应时间

**定义：**T(首次运行时间)-T(到达时间)

**问题：**如何构建对响应时间敏感的调度程序

## 轮转（RR）

**解决**了上述问题

- **基本思想：**RR 在一个时间片（time slice，有时称为调度量子，scheduling quantum）内运行一个工作，然后切换到运行队列中的下一个任务，而不是运行一个任务直到结束。它反复执行，直到所有任务完成。因此，RR 有时被称为时间切片（time-slicing）。请注意，<u>时间片长度必须是时钟中断周期的倍数</u>。

- **优点：**时间片越短，RR在响应时间表现越好

- **缺点：**时间片太短，上下文切换成本影响整体性能
  - 权衡时间片的长度，使其足够长，以便**摊销**（amortize）上下文切换成本

**小结：**我们开发了两种调度程序。

- 第一种类型（`SJF、STCF`）**优化周转时间，**但对响应时间不利。
- 第二种类型（RR）**优化响应时间**，但对周转时间不利。

## 无法预知

在一个通用的操作系统中（比如我们所关心的操作系统），操作系统通常对每个作业的长度知之甚少。因此，我们如何建立一个没有这种先验知识的 `SJF/STCF`？更进一步，我们如何能够将已经看到的一些想法与 RR 调度程序结合起来，以便响应时间也变得相当不错



