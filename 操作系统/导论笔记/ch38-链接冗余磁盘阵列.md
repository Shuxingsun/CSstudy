# 廉价冗余磁盘阵列（RAID）

**关键问题：如何得到大型、快速、可靠的磁盘**

> 我们如何构建一个大型、快速和可靠的存储系统？关键技术是什么？不同方法之间的折中是什么？

**RAID:**这种技术使用多个磁盘一起构建更快、更大、更可靠的磁盘系统

- RAID 看起来像一个磁盘：一组可以读取或写入的块
- RAID 具有许多优点：
  - 性能：并行使用多个磁盘可以大大加快 I/O 时间
  - 容量：大型数据集需要大型磁盘
  - 可靠性：在多个磁盘上传输数据（无 RAID 技术）会使数据容易受到单个磁盘丢失的影响。通过某种形式的冗余（redundancy），RAID 可以容许损失一个磁盘并保持运行，就像没有错误一样
- RAID 为使用它们的系统透明地(transparently）提供了这些优势，即RAID 对于主机系统看起来就像一个大磁盘

**RAID的重要内容：**

- 接口
- 故障模型
- 容量
- 可靠性

- 性能



## 接口和RAID内部

- 当<u>文件系统向 RAID 发出逻辑 I/O 请求</u>时，RAID 内部必须计算要访问的磁盘（或多个磁盘）以完成请求，然后发出一个或多个物理 I/O 来执行此操作。
- RAID 系统通常构建为单独的硬件盒，并通过标准连接(SCSI或SATA)连接主机



## 故障模型

**故障—停止（fail-stop）故障模型：**两种状态

- 工作状态或故障状态
- 使用工作状态的磁盘时，所有块都可以读取或写入。相反，当磁盘出现故障时，我们认为它永久丢失。

- 故障检测假定：具体来说，当磁盘发生故障时，我们认为这很容易检测到。



## 如何评估RAID

**三指标：**

- 容量：在给定一组 N 个磁盘的情况下，RAID 的客户端可用的容量有多少？没有冗余，答案显然是N
- 可靠性：给定设计允许有多少磁盘故障？根据我们的故障模型，我们只假设整个磁盘可能会故障
- 性能：性能有点难以评估，因为它在很大程度上取决于磁盘阵列提供的工作负载

**三个RAID重要设计：RAID 0 级（条带化），RAID 1 级（镜像）和 `RAID4/5` 级（基于奇偶校验的冗余）。**



## RAID 0 级：条带化



